apiVersion: v1
kind: ConfigMap
metadata:
  name: mosquitto-config
  namespace: mosquito-mqtt
  labels:
    app: mosquitto
data:
  mosquitto.conf: |
    # Listen on all interfaces on port 1883
    listener 1883 0.0.0.0

    # Allow clients without username/password
    allow_anonymous true

    # Persistence settings
    persistence true
    persistence_location /mosquitto/data/

    # Logging to stdout for container visibility
    log_dest stdout
    log_type error
    log_type warning
    log_type notice
    log_type information

    # Keep alive settings
    max_keepalive 65535

    # Retry settings
    retry_interval 20
    max_inflight_bytes 0
    max_queued_bytes 0


